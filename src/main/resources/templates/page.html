<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VDOMA.ua - –ì–ª–∞–≤–Ω–∞—è</title>
    <link rel="stylesheet" href="/css/style.css">
    <style>
        #map {
            width: 100%;
            height: 100vh;
        }
    </style>
</head>
<body>
<header class="header">
    <div class="header-left">
        <div class="logo-block">
            <a href="#" class="logo">VDOMA.ua</a>
            <div class="subtitle">–£–∫—Ä–∞—ó–Ω—Å—å–∫–∏–π —Å–µ—Ä–≤—ñ—Å –¥–ª—è –±—Ä–æ–Ω—é–≤–∞–Ω–Ω—è –∂–∏—Ç–ª–∞</div>
        </div>
    </div>

    <div class="header-right">
        <a href="#" class="btn btn-secondary">–ó–∞—Ä–µ–µ—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—å</a>
        <a href="#" class="btn btn-secondary">–í–≤—ñ–π—Ç–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç</a>
    </div>
</header>

<main style="padding: 0;">
    <!-- Google Maps -->
    <div id="map"></div>
    
    <!-- –ü–æ–∏—Å–∫–æ–≤—ã–π –ø–∏–∫–µ—Ä –ø–æ–≤–µ—Ä—Ö –∫–∞—Ä—Ç—ã -->
    <div class="search-container" style="position: absolute; top: 80px; left: 50%; transform: translateX(-50%); z-index: 1000;">
        <div class="search-bar">
            <div class="search-section destination">
                <div class="icon">üõèÔ∏è</div>
                <div class="content">
                    <input type="text" id="cityInput" class="city-input" placeholder="–ú—ñ—Å—Ç–æ" value="–ö–∏—ó–≤">
                    <div class="clear-btn" tabindex="-1" onclick="clearCity()">‚úï</div>
                </div>
                <div id="autocomplete" class="autocomplete-dropdown"></div>
            </div>
            
            <div class="search-section dates">
                <div class="icon">üìÖ</div>
                <div class="content">
                    <div class="label">—Å—Ä, 17 —Å–µ–Ω—Ç. ‚Äî —Å–±, 20 —Å–µ–Ω—Ç.</div>
                </div>
            </div>
            
            <div class="search-section guests">
                <div class="icon">üë§</div>
                <div class="content">
                    <div class="label">2 –≥–æ—Å—Ç–µ–π</div>
                    <div class="dropdown-arrow">‚ñº</div>
                </div>
            </div>
            
            <button class="search-btn">–ù–∞–π—Ç–∏</button>
        </div>
    </div>
</main>

<!-- Google Maps API -->

<script>

const cities = ['–ö–∏—ó–≤', '–ß–µ—Ä–∫–∞—Å–∏', '–•–∞—Ä–∫—ñ–≤'];
let filteredCities = [];

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Google Maps
function initMap() {
    const map = new google.maps.Map(document.getElementById('map'), {
        center: { lat: 50.4501, lng: 30.5234 }, // –ö–∏–µ–≤
        zoom: 10,
        styles: [
            {
                featureType: 'poi',
                elementType: 'labels',
                stylers: [{ visibility: 'off' }]
            }
        ]
    });

    // –î–æ–±–∞–≤–ª—è–µ–º –º–∞—Ä–∫–µ—Ä—ã –¥–ª—è –≥–æ—Ä–æ–¥–æ–≤
    const citiesData = [
        { name: '–ö–∏—ó–≤', lat: 50.4501, lng: 30.5234 },
        { name: '–ß–µ—Ä–∫–∞—Å–∏', lat: 49.4444, lng: 32.0598 },
        { name: '–•–∞—Ä–∫—ñ–≤', lat: 49.9935, lng: 36.2304 }
    ];

    citiesData.forEach(city => {
        new google.maps.Marker({
            position: { lat: city.lat, lng: city.lng },
            map: map,
            title: city.name,
            icon: {
                url: 'https://maps.google.com/mapfiles/ms/icons/red-dot.png',
                scaledSize: new google.maps.Size(30, 30)
            }
        });
    });
}

// –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –≥–æ—Ä–æ–¥–æ–≤ –ø–æ –≤–≤–æ–¥—É
function filterCities(input) {
    console.log('üîç –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –≥–æ—Ä–æ–¥–æ–≤ –¥–ª—è –≤–≤–æ–¥–∞:', input);
    const value = input.toLowerCase();
    filteredCities = cities.filter(city =>
        city.toLowerCase().includes(value)
    );
    console.log('üìã –ù–∞–π–¥–µ–Ω–Ω—ã–µ –≥–æ—Ä–æ–¥–∞:', filteredCities);
}

    // –ü–æ–∫–∞–∑ –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è
    function showAutocomplete(input) {
        let dropdown = document.getElementById('autocomplete');
        
        const rect = input.getBoundingClientRect();

        // –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥ –ø–æ–ª–µ–º –≤–≤–æ–¥–∞
        dropdown.style.position = 'fixed';
        dropdown.style.top = 67  + 'px';
        dropdown.style.left = 25 + 'px';
        dropdown.style.width = rect.width + 100 + 'px';
        dropdown.style.backgroundColor = 'white';
        dropdown.style.border = '1px solid #e0e0e0';
        dropdown.style.borderRadius = '4px';
        dropdown.style.boxShadow = '0 4px 12px rgba(0, 0, 0, 0.15)';
        dropdown.style.zIndex = '9999';
        dropdown.style.display = 'block';

        if (filteredCities.length > 0) {
            dropdown.innerHTML = filteredCities.map(city => `
                <div class="autocomplete-item" onclick="selectCity('${city}')">
                    <div class="item-icon">üìç</div>
                    <div class="item-content">
                        <div class="item-title">${city}</div>
                        <div class="item-subtitle">–£–∫—Ä–∞—ó–Ω–∞</div>
                    </div>
                </div>
            `).join('');
        } else {
            dropdown.style.display = 'none';
        }
    }

    // –í—ã–±–æ—Ä –≥–æ—Ä–æ–¥–∞
    function selectCity(city) {
        document.getElementById('cityInput').value = city;
        document.getElementById('autocomplete').style.display = 'none';
    }

    // –û—á–∏—Å—Ç–∫–∞ –ø–æ–ª—è
    function clearCity() {
        document.getElementById('cityInput').value = '';
        document.getElementById('cityInput').focus();
        document.getElementById('cityInput').blur();
    }

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    document.addEventListener('DOMContentLoaded', function() {
        const cityInput = document.getElementById('cityInput');
        if (!cityInput) {
            return;
        }
        
        // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫—É—Ä—Å–æ—Ä–∞ –≤ –∫–æ–Ω–µ—Ü –ø—Ä–∏ –∫–ª–∏–∫–µ
        cityInput.addEventListener('click', function() {
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫—É—Ä—Å–æ—Ä –≤ –∫–æ–Ω–µ—Ü —Ç–µ–∫—Å—Ç–∞
            this.setSelectionRange(this.value.length, this.value.length);
            this.focus();
        });
        
        cityInput.addEventListener('input', function() {
            filterCities(this.value);
            showAutocomplete(this);
        });
        
        cityInput.addEventListener('focus', function() {
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫—É—Ä—Å–æ—Ä –≤ –∫–æ–Ω–µ—Ü –ø—Ä–∏ —Ñ–æ–∫—É—Å–µ
            this.setSelectionRange(this.value.length, this.value.length);
            filterCities(this.value);
            showAutocomplete(this);
        });
        
        // –°–∫—Ä—ã—Ç–∏–µ –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –ø–æ–ª—è
        document.addEventListener('click', function(e) {
            if (!e.target.closest('.destination')) {
                document.getElementById('autocomplete').style.display = 'none';
            }
        });
    });

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –æ—à–∏–±–∫–∏
    window.addEventListener('error', function(e) {
        console.error('–û–®–ò–ë–ö–ê JavaScript:', e);
    });
</script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD1N7wbWbOUD503nkjTZWSaKFDKj36M9A4&callback=initMap" async defer></script>

</body>
</html>